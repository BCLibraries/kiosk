
(function(c){var f=function(a){return a!==undefined?(this.array[0]=a):this.array[0]},g=function(a){return a!==undefined?(this.array[1]=a):this.array[1]};c.Vector=function(){this.update(c.makeArray(arguments))};c.Vector.prototype={app:function(a){var b,d=[];for(b=0;b<this.array.length;b++)d.push(a(this.array[b]));return(new c.Vector).update(d)},plus:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)d[a]=
(d[a]?d[a]:0)+b[a];return e.update(d)},minus:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)d[a]=(d[a]?d[a]:0)-b[a];return e.update(d)},equals:function(){var a,b=arguments[0]instanceof c.Vector?arguments[0].array:c.makeArray(arguments),d=this.array.slice(0),e=new c.Vector;for(a=0;a<b.length;a++)if(d[a]!=b[a])return null;return e.update(d)},x:f,left:f,width:f,y:g,top:g,height:g,toString:function(){return"("+
this.array[0]+","+this.array[1]+")"},update:function(a){var b;if(this.array)for(b=0;b<this.array.length;b++)delete this.array[b];this.array=a;for(b=0;b<a.length;b++)this[b]=this.array[b];return this}};c.Event.prototype.vector=function(){if(this.originalEvent.synthetic){var a=document.documentElement,b=document.body;return new c.Vector(this.clientX+(a&&a.scrollLeft||b&&b.scrollLeft||0)-(a.clientLeft||0),this.clientY+(a&&a.scrollTop||b&&b.scrollTop||0)-(a.clientTop||0))}else return new c.Vector(this.pageX,
this.pageY)};c.fn.offsetv=function(){if(this[0]==window)return new c.Vector(window.pageXOffset?window.pageXOffset:document.documentElement.scrollLeft,window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop);else{var a=this.offset();return new c.Vector(a.left,a.top)}};c.fn.dimensionsv=function(a){return this[0]==window||!a?new c.Vector(this.width(),this.height()):new c.Vector(this[a+"Width"](),this[a+"Height"]())}})(jQuery);
(function(){var g=jQuery.event,m=function(a,e,d,h){var f,b,c,k,j,i,l,n;for(f=0;f<e.length;f++){b=e[f];k=b.indexOf(".")<0;if(!k){c=b.split(".");b=c.shift();l=new RegExp("(^|\\.)"+c.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}c=(a[b]||[]).slice(0);for(j=0;j<c.length;j++){i=c[j];if(n=k||l.test(i.namespace))if(h){if(i.selector===h)d(b,i.origHandler||i.handler)}else if(h===null)d(b,i.origHandler||i.handler,i.selector);else i.selector||d(b,i.origHandler||i.handler)}}};g.find=function(a,e,d){a=($._data(a)||
{}).events;var h=[];if(!a)return h;m(a,e,function(f,b){h.push(b)},d);return h};g.findBySelector=function(a,e){a=$._data(a).events;var d={},h=function(f,b,c){f=d[f]||(d[f]={});(f[b]||(f[b]=[])).push(c)};if(!a)return d;m(a,e,function(f,b,c){h(c||"",f,b)},null);return d};g.supportTouch="ontouchend"in document;$.fn.respondsTo=function(a){return this.length?g.find(this[0],$.isArray(a)?a:[a]).length>0:false};$.fn.triggerHandled=function(a,e){a=typeof a=="string"?$.Event(a):a;this.trigger(a,e);return a.handled};
g.setupHelper=function(a,e,d){if(!d){d=e;e=null}var h=function(b){var c=b.selector||"";if(c){b=g.find(this,a,c);b.length||$(this).delegate(c,e,d)}else g.find(this,a,c).length||g.add(this,e,d,{selector:c,delegate:this})},f=function(b){var c=b.selector||"";if(c){b=g.find(this,a,c);b.length||$(this).undelegate(c,e,d)}else g.find(this,a,c).length||g.remove(this,e,d,{selector:c,delegate:this})};$.each(a,function(){g.special[this]={add:h,remove:f,setup:function(){},teardown:function(){}}})}})(jQuery);
(function(c){var h=function(a,b){var d=Array.prototype.slice.call(arguments,2);return function(){var e=[this].concat(d,c.makeArray(arguments));return b.apply(a,e)}},g=c.event,i=window.getSelection?function(){window.getSelection().removeAllRanges()}:function(){};c.Drag=function(){};c.extend(c.Drag,{lowerName:"drag",current:null,distance:0,mousedown:function(a,b){if(!(!(a.button===0||a.button==1)||this.current)){var d=new c.Drag,e=a.delegateTarget||b,f=a.handleObj.selector,j=this;this.current=d;d.setup({element:b,
delegate:a.delegateTarget||b,selector:a.handleObj.selector,moved:false,_distance:this.distance,callbacks:{dragdown:g.find(e,["dragdown"],f),draginit:g.find(e,["draginit"],f),dragover:g.find(e,["dragover"],f),dragmove:g.find(e,["dragmove"],f),dragout:g.find(e,["dragout"],f),dragend:g.find(e,["dragend"],f)},destroyed:function(){j.current=null}},a)}}});c.extend(c.Drag.prototype,{setup:function(a,b){c.extend(this,a);this.element=c(this.element);this.event=b;this.allowOtherDrags=this.moved=false;var d=
h(this,this.mousemove),e=h(this,this.mouseup);this._mousemove=d;this._mouseup=e;this._distance=a.distance?a.distance:0;this.mouseStartPosition=b.vector();c(document).bind("mousemove",d);c(document).bind("mouseup",e);if(!this.callEvents("down",this.element,b)){this.noSelection(this.delegate);i()}},destroy:function(){c(document).unbind("mousemove",this._mousemove);c(document).unbind("mouseup",this._mouseup);if(!this.moved)this.event=this.element=null;this.selection(this.delegate);this.destroyed()},
mousemove:function(a,b){if(!this.moved){if(Math.sqrt(Math.pow(b.pageX-this.event.pageX,2)+Math.pow(b.pageY-this.event.pageY,2))<this._distance)return false;this.init(this.element,b);this.moved=true}a=b.vector();this._start_position&&this._start_position.equals(a)||this.draw(a,b)},mouseup:function(a,b){this.moved&&this.end(b);this.destroy()},noSelection:function(a){a=a||this.delegate;document.documentElement.onselectstart=function(){return false};document.documentElement.unselectable="on";this.selectionDisabled=
this.selectionDisabled?this.selectionDisabled.add(a):c(a);this.selectionDisabled.css("-moz-user-select","-moz-none")},selection:function(){if(this.selectionDisabled){document.documentElement.onselectstart=function(){};document.documentElement.unselectable="off";this.selectionDisabled.css("-moz-user-select","")}},init:function(a,b){a=c(a);var d=this.movingElement=this.element=c(a);this._cancelled=false;this.event=b;this.mouseElementPosition=this.mouseStartPosition.minus(this.element.offsetv());this.callEvents("init",
a,b);if(this._cancelled!==true){this.startPosition=d!=this.movingElement?this.movingElement.offsetv():this.currentDelta();this.makePositioned(this.movingElement);this.oldZIndex=this.movingElement.css("zIndex");this.movingElement.css("zIndex",1E3);!this._only&&this.constructor.responder&&this.constructor.responder.compile(b,this)}},makePositioned:function(a){var b;b=a.css("position");if(!b||b=="static"){b={position:"relative"};if(window.opera){b.top="0px";b.left="0px"}a.css(b)}},callEvents:function(a,
b,d,e){var f=this.callbacks[this.constructor.lowerName+a];for(a=0;a<f.length;a++)f[a].call(b,d,this,e);return f.length},currentDelta:function(){return new c.Vector(parseInt(this.movingElement.css("left"),10)||0,parseInt(this.movingElement.css("top"),10)||0)},draw:function(a,b){if(!this._cancelled){i();this.location=a.minus(this.mouseElementPosition);this.move(b);if(!this._cancelled){b.isDefaultPrevented()||this.position(this.location);!this._only&&this.constructor.responder&&this.constructor.responder.show(a,
this,b)}}},position:function(a){var b=this.currentDelta();b=this.movingElement.offsetv().minus(b);this.required_css_position=a.minus(b);this.offsetv=a;a=this.movingElement[0].style;if(!this._cancelled&&!this._horizontal)a.top=this.required_css_position.top()+"px";if(!this._cancelled&&!this._vertical)a.left=this.required_css_position.left()+"px"},move:function(a){this.callEvents("move",this.element,a)},over:function(a,b){this.callEvents("over",this.element,a,b)},out:function(a,b){this.callEvents("out",
this.element,a,b)},end:function(a){if(!this._cancelled){!this._only&&this.constructor.responder&&this.constructor.responder.end(a,this);this.callEvents("end",this.element,a);if(this._revert){var b=this;this.movingElement.animate({top:this.startPosition.top()+"px",left:this.startPosition.left()+"px"},function(){b.cleanup.apply(b,arguments)})}else this.cleanup();this.event=null}},cleanup:function(){this.movingElement.css({zIndex:this.oldZIndex});this.movingElement[0]!==this.element[0]&&!this.movingElement.has(this.element[0]).length&&
!this.element.has(this.movingElement[0]).length&&this.movingElement.css({display:"none"});this._removeMovingElement&&this.movingElement.remove();this.movingElement=this.element=this.event=null},cancel:function(){this._cancelled=true;!this._only&&this.constructor.responder&&this.constructor.responder.clear(this.event.vector(),this,this.event);this.destroy()},ghost:function(a){var b=this.movingElement.clone().css("position","absolute");(a?c(a):this.movingElement).after(b);b.width(this.movingElement.width()).height(this.movingElement.height());
b.offset(this.movingElement.offset());this.movingElement=b;this.noSelection(b);this._removeMovingElement=true;return b},representative:function(a,b,d){this._offsetX=b||0;this._offsetY=d||0;b=this.mouseStartPosition;this.movingElement=c(a);this.movingElement.css({top:b.y()-this._offsetY+"px",left:b.x()-this._offsetX+"px",display:"block",position:"absolute"}).show();this.noSelection(this.movingElement);this.mouseElementPosition=new c.Vector(this._offsetX,this._offsetY)},revert:function(a){this._revert=
a===undefined?true:a;return this},vertical:function(){this._vertical=true;return this},horizontal:function(){return this._horizontal=true},only:function(a){return this._only=a===undefined?true:a},distance:function(a){if(a!==undefined){this._distance=a;return this}else return this._distance}});g.setupHelper(["dragdown","draginit","dragover","dragmove","dragout","dragend"],"mousedown",function(a){c.Drag.mousedown.call(c.Drag,a,this)})})(jQuery);
